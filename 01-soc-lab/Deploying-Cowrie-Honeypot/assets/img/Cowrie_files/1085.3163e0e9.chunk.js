/*! For license information please see 1085.3163e0e9.chunk.js.LICENSE.txt */
"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[1085],{84182:(e,t,n)=>{n.d(t,{$E:()=>o,Li:()=>l,QX:()=>r,Vf:()=>a,_v:()=>u,tI:()=>c});var i=n(42976),r=[i.lT.OPEN,i.lT.IN_REVIEW,i.lT.CHANGES_REQUESTED,i.lT.ACCEPTED,i.lT.CANCELLED,i.lT.REJECTED],o=[i.lT.OPEN,i.lT.IN_REVIEW,i.lT.CHANGES_REQUESTED],a=function(e){return!(!e||!o.includes(e))},u=function(e){return e===i.lT.ACCEPTED},l=function(e){return a(e)||u(e)},c=function(e){return e===i.lT.REJECTED||e===i.lT.CANCELLED}},66356:(e,t,n)=>{n.d(t,{c:()=>s});var i=n(54499),r=n(43253),o=n(53303),a=n(55127),u=n.n(a),l=n(96540),c=n(91271);function s(e){var t=e.hasPrefix,n=void 0!==t&&t,a=e.timestamp,s=e.testId,d=e.isShorthand,m=e.isSameYearShorthand,f=e.includeMinutesAgo,v=e.includeTimeOfDay,p=void 0!==v&&v,b=Date.now(),y=(0,i.A)(b,a),h=(0,r.A)(b,a);if(0===h){var k=(0,o.A)(b,a);if(f&&k>0){var E="".concat(k," ").concat(u()("min",k)," ago");return l.createElement(l.Fragment,null,E)}var g=n?"just now":"Just now";return l.createElement(l.Fragment,null,g)}if(h>=1&&h<24){var S=d?"".concat(h,"h ago"):"".concat(h," ").concat(u()("hour",h)," ago");return l.createElement(l.Fragment,null,S)}if(y>=1&&y<7){var w=d?"".concat(y,"d ago"):"".concat(y," ").concat(u()("day",y)," ago");return l.createElement(l.Fragment,null,w)}return(0,c.n9)({timestamp:a,testId:s,isShorthand:d,isSameYearShorthand:m,includeTimeOfDay:p})}},4369:(e,t,n)=>{n.d(t,{z:()=>N});var i,r=n(64467),o=n(5544),a=n(95420),u=n(96540),l=n(52764),c=n(14782),s=n(52290),d=n(86527),m=n(46445),f=n(20036),v=n(36557),p=n(91830);function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},b.apply(null,arguments)}const y=function(e){return u.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,viewBox:"0 0 20 16"},e),i||(i=u.createElement("path",{d:"M0 .353v15.294h20V.353zm6.948 9.374L10 12.226l3.052-2.499 4.877 4.73H2.071zm-5.75 3.913V5.02l4.82 3.946zm12.784-4.675 4.82-3.946v8.621zm4.82-7.421v1.933L10 10.682 1.198 3.477V1.544z"})))};var h=n(60603),k={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"subscribersCount"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"isNewsletter"}},{kind:"Field",name:{kind:"Name",value:"isAuthorNewsletter"}}]}}]},E={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SendPostAsEmailsMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendPostAsEmails"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}]}]}}]};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){var t=e.post,n=e.onClick,i=e.menuStyle,r=(0,h.e)(!1),l=(0,o.A)(r,3),c=l[0],b=l[1],g=l[2],w=(0,p.zF)(),N=function(){g(),n()},O=(0,a.n)(E,{variables:{postId:(null==t?void 0:t.id)||""},onCompleted:function(e){var t=e.sendPostAsEmails;w(t?{message:"Your story has been emailed to subscribers.",toastStyle:"MESSAGE",duration:2e3}:{message:"We couldn't process your request. Try again, or contact our support team.",toastStyle:"ERROR",duration:2e3})},update:function(e,n){var i={id:"Post:".concat(null==t?void 0:t.id),fragment:k,fragmentName:"NewsletterV3EmailToSubscribersMenuItem_post"},r=e.readFragment(i);n.data&&r&&e.writeFragment(S(S({},i),{},{data:S(S({},r),{},{isAuthorNewsletter:n.data.sendPostAsEmails})}))}}),T=(0,o.A)(O,1)[0];return u.createElement(u.Fragment,null,u.createElement(s.a,{display:"inline-block"},"TEXT"===i?u.createElement(v.kZ,{scale:"M"},u.createElement(d.N,{"data-testid":"emailToSubscribersMenuItem",onClick:function(){null!=t&&t.isAuthorNewsletter?(w({message:"You’ve already sent this story to subscribers.",toastStyle:"ERROR",duration:2e3}),n()):b()}},"Email to subscribers")):u.createElement(d.N,{"data-testid":"emailToSubscribersMenuItem",onClick:function(){null!=t&&t.isAuthorNewsletter?(w({message:"You’ve already sent this story to subscribers.",toastStyle:"ERROR",duration:2e3}),n()):b()}},u.createElement(f.u,{icon:u.createElement(y,{"aria-label":"Email to subscribers"}),tooltipText:"Email to subscribers"}))),u.createElement(m.T,{onConfirm:function(){T(),N()},isVisible:c,hide:N,titleText:"Email to subscribers",confirmText:"Send",buttonStyle:"STRONG",buttonSize:"LARGE",showCancelButton:!0,withCloseButton:!0,isDestructiveAction:!1},"A link to this story will be emailed to all your subscribers."))}function N(e){var t=e.post,n=e.onClick,i=e.menuStyle,r=e.paddingLeftRight,o=void 0===r?"20px":r;return u.createElement(l.c,null,(function(e){var r,a,l;return e&&e.id===(null==t||null===(r=t.creator)||void 0===r?void 0:r.id)&&(null==t||!t.isNewsletter)&&((null==t||null===(a=t.creator)||void 0===a||null===(l=a.newsletterV3)||void 0===l?void 0:l.subscribersCount)||0)>0?u.createElement(c.q3,{paddingTopBottom:"8px",paddingLeftRight:o},u.createElement(w,{post:t,onClick:n,menuStyle:i})):null}))}},64946:(e,t,n)=>{n.d(t,{m:()=>C});var i=n(80045),r=n(96540),o=n(27721),a=n(86329),u=n(14782),l=n(86527),c=n(89536),s=n(82284),d=n(10467),m=n(5544),f=n(95420),v=n(84182),p=n(34317),b=n(42976),y=n(91830),h={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"WithdrawSubmissionMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateSubmissionStatusInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateSubmissionStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"status"}},{kind:"Field",name:{kind:"Name",value:"updatedAt"}}]}}]}}]};function k(){var e=O(),t=e.m(k),n=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function i(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===n||"GeneratorFunction"===(t.displayName||t.name))}var r={throw:1,return:2,break:3,continue:3};function o(e){var t,n;return function(i){t||(t={stop:function(){return n(i.a,2)},catch:function(){return i.v},abrupt:function(e,t){return n(i.a,r[e],t)},delegateYield:function(e,r,o){return t.resultName=r,n(i.d,E(e),o)},finish:function(e){return n(i.f,e)}},n=function(e,n,r){i.p=t.prev,i.n=t.next;try{return e(n,r)}finally{t.next=i.n}}),t.resultName&&(t[t.resultName]=i.v,t.resultName=void 0),t.sent=i.v,t.next=i.n;try{return e.call(this,t)}finally{i.p=t.prev,i.n=t.next}}}return(k=function(){return{wrap:function(t,n,i,r){return e.w(o(t),n,i,r&&r.reverse())},isGeneratorFunction:i,mark:e.m,awrap:function(e,t){return new A(e,t)},AsyncIterator:N,async:function(e,t,n,r,a){return(i(t)?w:S)(o(e),t,n,r,a)},keys:g,values:E}})()}function E(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError((0,s.A)(e)+" is not iterable")}function g(e){var t=Object(e),n=[];for(var i in t)n.unshift(i);return function e(){for(;n.length;)if((i=n.pop())in t)return e.value=i,e.done=!1,e;return e.done=!0,e}}function S(e,t,n,i,r){var o=w(e,t,n,i,r);return o.next().then((function(e){return e.done?e.value:o.next()}))}function w(e,t,n,i,r){return new N(O().w(e,t,n,i),r||Promise)}function N(e,t){function n(i,r,o,a){try{var u=e[i](r),l=u.value;return l instanceof A?t.resolve(l.v).then((function(e){n("next",e,o,a)}),(function(e){n("throw",e,o,a)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,a)}))}catch(e){a(e)}}var i;this.next||(T(N.prototype),T(N.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),T(this,"_invoke",(function(e,r,o){function a(){return new t((function(t,i){n(e,o,t,i)}))}return i=i?i.then(a,a):a()}),!0)}function O(){var e,t,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function o(n,i,r,o){var l=i&&i.prototype instanceof u?i:u,c=Object.create(l.prototype);return T(c,"_invoke",function(n,i,r){var o,u,l,c=0,s=r||[],d=!1,m={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return o=t,u=0,l=e,m.n=n,a}};function f(n,i){for(u=n,l=i,t=0;!d&&c&&!r&&t<s.length;t++){var r,o=s[t],f=m.p,v=o[2];n>3?(r=v===i)&&(l=o[(u=o[4])?5:(u=3,3)],o[4]=o[5]=e):o[0]<=f&&((r=n<2&&f<o[1])?(u=0,m.v=i,m.n=o[1]):f<v&&(r=n<3||o[0]>i||i>v)&&(o[4]=n,o[5]=i,m.n=v,u=0))}if(r||n>1)return a;throw d=!0,i}return function(r,s,v){if(c>1)throw TypeError("Generator is already running");for(d&&1===s&&f(s,v),u=s,l=v;(t=u<2?e:l)||!d;){o||(u?u<3?(u>1&&(m.n=-1),f(u,l)):m.n=l:m.v=l);try{if(c=2,o){if(u||(r="next"),t=o[r]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,u<2&&(u=0)}else 1===u&&(t=o.return)&&t.call(o),u<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),u=1);o=e}else if((t=(d=m.n<0)?l:n.call(i,m))!==a)break}catch(t){o=e,u=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,r,o),!0),c}var a={};function u(){}function l(){}function c(){}t=Object.getPrototypeOf;var s=[][i]?t(t([][i]())):(T(t={},i,(function(){return this})),t),d=c.prototype=u.prototype=Object.create(s);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,T(e,r,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,T(d,"constructor",c),T(c,"constructor",l),l.displayName="GeneratorFunction",T(c,r,"GeneratorFunction"),T(d),T(d,r,"Generator"),T(d,i,(function(){return this})),T(d,"toString",(function(){return"[object Generator]"})),(O=function(){return{w:o,m}})()}function T(e,t,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}T=function(e,t,n,i){function o(t,n){T(e,t,(function(e){return this._invoke(t,n,e)}))}t?r?r(e,t,{value:n,enumerable:!i,configurable:!i,writable:!i}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},T(e,t,n,i)}function A(e,t){this.v=e,this.k=t}var _=["postActionCallback"],C=function(e){var t=e.postActionCallback,n=(0,i.A)(e,_),s=(0,o.R)().value,E="submission"in n?n.submission:void 0,g="post"in n?n.post:void 0,S=function(e,t){var n=(0,y.zF)(),i=(0,p.$L)(),r=(0,f.n)(h),o=(0,m.A)(r,2),a=o[0],u=o[1].loading,l=(null==t?void 0:t.post.id)||(null==e?void 0:e.id)||"",c=(null==e?void 0:e.collection)||(null==e?void 0:e.pendingCollection),s=(null==t?void 0:t.publication.id)||(null==c?void 0:c.id)||"",E=(null==t?void 0:t.publication.name)||(null==c?void 0:c.name)||"this publication",g={status:b.lT.CANCELLED};t?g.submissionId=t.id:g.postPublicationTuple={postId:l,publicationId:s};var S="withdrawn",w="withdrawing";(t&&(0,v._v)(t.status)||e&&!e.pendingCollection)&&(S="removed",w="removing");var N=function(){n({message:"There was an error ".concat(w," the story").concat(e?" from ".concat(E):"",". Please try again later."),toastStyle:"ERROR"})},O=function(){var e=(0,d.A)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,a({variables:{input:g},update:function(e,t){var n,i;if("PublicationSubmission"===(null===(n=t.data)||void 0===n||null===(i=n.updateSubmissionStatus)||void 0===i?void 0:i.__typename)){var r=t.data.updateSubmissionStatus;e.modify({id:e.identify({__typename:"PublicationSubmission",id:r.id}),fields:{status:function(){return r.status}}}),e.modify({id:e.identify({__typename:"Post",id:l}),fields:{publishSchedule:function(){return null},updatedAt:function(){return r.updatedAt},collection:function(){return null},pendingCollection:function(){return null},statusForCollection:function(){return null}}})}},onCompleted:function(){n({message:"You have ".concat(S," your story from ").concat(E,".")})},onError:function(){N()}});case 5:i.event("submission.postWithdrawn",{postId:l,collectionId:s}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),N();case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}();return{collection:c,withdrawSubmission:O,loading:u}}(g,E),w=S.withdrawSubmission,N=S.collection,O=S.loading,T=(0,a.J)(null==N?void 0:N.id).viewerEdge,A=null!=g?g:null==E?void 0:E.post,C=A&&function(e,t){return t&&e.creator&&t.id===e.creator.id}(A,s),D=(null==T?void 0:T.isEditor)||(0,c.KT)(null==E?void 0:E.publication.viewerEdge),P="Removing...",F="Remove from publication";C&&(P="Withdrawing...",F="Withdraw submission");var j=!s||!D&&!C||!N,x=!!(A&&"isNewsletter"in A&&A.isNewsletter);return j&&!E||x?null:r.createElement(u.q3,null,r.createElement(l.N,{onClick:function(){w(),null==t||t()}},O?P:F))}},55981:(e,t,n)=>{n.d(t,{n:()=>u});var i=n(96540),r=n(44402),o=n(1417),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"24px",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"24px";return function(n){return{width:e,height:t,"& path":{fill:n.colorTokens.foreground.error.primary.base}}}},u=function(e){var t=e.width,n=e.height,u=(0,r.l)();return i.createElement(o.A,{className:u(a(t,n))})}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/1085.3163e0e9.chunk.js.map